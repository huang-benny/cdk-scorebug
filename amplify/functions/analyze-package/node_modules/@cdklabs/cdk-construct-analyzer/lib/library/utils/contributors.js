"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.processContributorsData = processContributorsData;
exports.isBotOrAutomated = isBotOrAutomated;
/**
 * Contributor-related utility functions
 */
/**
 * Process contributors data to count unique human contributors from the last month
 */
function processContributorsData(contributorsData) {
    if (!contributorsData?.length) {
        return 0;
    }
    const contributors = new Set();
    for (const commit of contributorsData) {
        if (commit.author?.user?.login && !isBotOrAutomated(commit.author.user.login)) {
            contributors.add(commit.author.user.login);
        }
        else if (commit.author?.email && !isBotOrAutomated(commit.author.email)) {
            contributors.add(commit.author.email);
        }
    }
    return contributors.size;
}
/**
 * Check if a username or commit message indicates bot/automated activity
 */
function isBotOrAutomated(username) {
    const botPatterns = [
        /bot/i, // Match "bot" anywhere in the string
        /^automation/i,
    ];
    if (botPatterns.some(pattern => pattern.test(username))) {
        return true;
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJpYnV0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYnJhcnkvdXRpbHMvY29udHJpYnV0b3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBU0EsMERBZ0JDO0FBS0QsNENBV0M7QUF2Q0Q7O0dBRUc7QUFFSDs7R0FFRztBQUNILFNBQWdCLHVCQUF1QixDQUFDLGdCQUFpQztJQUN2RSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDOUIsT0FBTyxDQUFDLENBQUM7SUFDWCxDQUFDO0lBRUQsTUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLEVBQVUsQ0FBQztJQUV2QyxLQUFLLE1BQU0sTUFBTSxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDdEMsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQzlFLFlBQVksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsQ0FBQzthQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFLLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDMUUsWUFBWSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hDLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDO0FBQzNCLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQWdCLGdCQUFnQixDQUFDLFFBQWdCO0lBQy9DLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLE1BQU0sRUFBRSxxQ0FBcUM7UUFDN0MsY0FBYztLQUNmLENBQUM7SUFFRixJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN4RCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEdpdEh1YkNvbW1pdCB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBDb250cmlidXRvci1yZWxhdGVkIHV0aWxpdHkgZnVuY3Rpb25zXG4gKi9cblxuLyoqXG4gKiBQcm9jZXNzIGNvbnRyaWJ1dG9ycyBkYXRhIHRvIGNvdW50IHVuaXF1ZSBodW1hbiBjb250cmlidXRvcnMgZnJvbSB0aGUgbGFzdCBtb250aFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc0NvbnRyaWJ1dG9yc0RhdGEoY29udHJpYnV0b3JzRGF0YT86IEdpdEh1YkNvbW1pdFtdKTogbnVtYmVyIHtcbiAgaWYgKCFjb250cmlidXRvcnNEYXRhPy5sZW5ndGgpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNvbnN0IGNvbnRyaWJ1dG9ycyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZvciAoY29uc3QgY29tbWl0IG9mIGNvbnRyaWJ1dG9yc0RhdGEpIHtcbiAgICBpZiAoY29tbWl0LmF1dGhvcj8udXNlcj8ubG9naW4gJiYgIWlzQm90T3JBdXRvbWF0ZWQoY29tbWl0LmF1dGhvci51c2VyLmxvZ2luKSkge1xuICAgICAgY29udHJpYnV0b3JzLmFkZChjb21taXQuYXV0aG9yLnVzZXIubG9naW4pO1xuICAgIH0gZWxzZSBpZiAoY29tbWl0LmF1dGhvcj8uZW1haWwgJiYgIWlzQm90T3JBdXRvbWF0ZWQoY29tbWl0LmF1dGhvci5lbWFpbCkpIHtcbiAgICAgIGNvbnRyaWJ1dG9ycy5hZGQoY29tbWl0LmF1dGhvci5lbWFpbCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbnRyaWJ1dG9ycy5zaXplO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdXNlcm5hbWUgb3IgY29tbWl0IG1lc3NhZ2UgaW5kaWNhdGVzIGJvdC9hdXRvbWF0ZWQgYWN0aXZpdHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQm90T3JBdXRvbWF0ZWQodXNlcm5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBib3RQYXR0ZXJucyA9IFtcbiAgICAvYm90L2ksIC8vIE1hdGNoIFwiYm90XCIgYW55d2hlcmUgaW4gdGhlIHN0cmluZ1xuICAgIC9eYXV0b21hdGlvbi9pLFxuICBdO1xuXG4gIGlmIChib3RQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KHVzZXJuYW1lKSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn0iXX0=