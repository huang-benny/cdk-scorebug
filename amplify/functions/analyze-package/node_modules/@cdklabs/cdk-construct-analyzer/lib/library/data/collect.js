"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.collectPackageData = collectPackageData;
const github_repo_1 = require("./github-repo");
const npm_1 = require("./npm");
const utils_1 = require("../utils");
/**
 * Phase 1: Fetch all raw data from external APIs
 */
async function fetchAllData(packageName) {
    const npmCollector = new npm_1.NpmCollector();
    await npmCollector.fetchPackage(packageName);
    const npmData = npmCollector.getPackageData();
    const downloadData = await npmCollector.fetchDownloadData();
    const authorPackageCountData = await npmCollector.fetchAuthorPackageCount();
    const repoInfo = (0, utils_1.extractRepoInfo)(npmData.repository.url);
    const githubRepo = new github_repo_1.GitHubRepo(repoInfo.owner, repoInfo.repo);
    let githubData;
    try {
        const response = await githubRepo.metadata();
        if (response.error) {
            console.warn(`GitHub fetch failed: ${response.error}`);
        }
        else if (response.data) {
            githubData = response.data.repository;
        }
    }
    catch (error) {
        console.warn(`GitHub fetch failed: ${error}`);
    }
    return {
        npm: npmData,
        downloads: downloadData,
        authorPackageCount: authorPackageCountData,
        ...(githubData && { github: githubData }),
    };
}
/**
 * Phase 2: Process raw data into final structured format organized by signal names
 */
function processPackageData(rawData) {
    const [majorVersion, minorVersion] = rawData.npm.version.split('.');
    const jsiiLanguageCount = (0, utils_1.analyzeJsiiLanguageSupport)(rawData.npm.packageJson);
    if (!rawData.github) {
        return {
            version: rawData.npm.version,
            weeklyDownloads: rawData.downloads.downloads,
            authorPackageCount: rawData.authorPackageCount,
            stableVersioning: {
                isStableMajorVersion: parseInt(majorVersion, 10) >= 1,
                hasMinorReleases: parseInt(minorVersion, 10) >= 1,
                isDeprecated: rawData.npm.isDeprecated,
            },
            provenanceVerification: rawData.npm.hasProvenance,
            multiLanguageSupport: jsiiLanguageCount,
        };
    }
    const repository = rawData.github;
    return {
        version: rawData.npm.version,
        numberOfContributors_Maintenance: (0, utils_1.processContributorsData)(repository.commits),
        documentationCompleteness: (0, utils_1.analyzeDocumentationCompleteness)(repository),
        testsChecklist: (0, utils_1.analyzeTestsPresence)(repository),
        authorPackageCount: rawData.authorPackageCount,
        releaseNotesIncludeFeatsAndFixes: (0, utils_1.analyzeReleaseNotesContent)(repository),
        weeklyDownloads: rawData.downloads.downloads,
        githubStars: repository.stargazerCount ?? 0,
        stableVersioning: {
            isStableMajorVersion: parseInt(majorVersion, 10) >= 1,
            hasMinorReleases: parseInt(minorVersion, 10) >= 1,
            isDeprecated: rawData.npm.isDeprecated,
        },
        timeToFirstResponse: (0, utils_1.calculateTimeToFirstResponse)(repository.issues),
        provenanceVerification: rawData.npm.hasProvenance,
        numberOfContributors_Popularity: (0, utils_1.processContributorsData)(repository.commits),
        releaseFrequency: (0, utils_1.calculateReleaseFrequency)(repository.releases),
        numberOfFeatsAndFixes: (0, utils_1.countFeatsAndFixes)(repository),
        multiLanguageSupport: jsiiLanguageCount,
        openIssuesRatio: (0, utils_1.calculateOpenIssuesRatio)(repository.openIssuesCount, repository.totalIssuesCount),
    };
}
/**
 * Main entry point: Fetch and process package data
 */
async function collectPackageData(packageName) {
    const rawData = await fetchAllData(packageName);
    return processPackageData(rawData);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWJyYXJ5L2RhdGEvY29sbGVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWlIQSxnREFHQztBQW5IRCwrQ0FBMkM7QUFDM0MsK0JBQXNFO0FBQ3RFLG9DQVdrQjtBQVlsQjs7R0FFRztBQUNILEtBQUssVUFBVSxZQUFZLENBQUMsV0FBbUI7SUFDN0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxrQkFBWSxFQUFFLENBQUM7SUFFeEMsTUFBTSxZQUFZLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sT0FBTyxHQUFHLFlBQVksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUM5QyxNQUFNLFlBQVksR0FBRyxNQUFNLFlBQVksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzVELE1BQU0sc0JBQXNCLEdBQUcsTUFBTSxZQUFZLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztJQUU1RSxNQUFNLFFBQVEsR0FBRyxJQUFBLHVCQUFlLEVBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6RCxNQUFNLFVBQVUsR0FBRyxJQUFJLHdCQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFakUsSUFBSSxVQUFVLENBQUM7SUFDZixJQUFJLENBQUM7UUFDSCxNQUFNLFFBQVEsR0FBRyxNQUFNLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM3QyxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNuQixPQUFPLENBQUMsSUFBSSxDQUFDLHdCQUF3QixRQUFRLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUN6RCxDQUFDO2FBQU0sSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDekIsVUFBVSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3hDLENB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ZUFBZSxFQUFFLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQztLQUNuRyxDQUFDO0FBQ0osQ0FBQztBQUVEOztHQUVHO0FBQ0ksS0FBSyxVQUFVLGtCQUFrQixDQUFDLFdBQW1CO0lBQzFELE1BQU0sT0FBTyxHQUFHLE1BQU0sWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2hELE9BQU8sa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDckMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhY2thZ2VEYXRhLCBHaXRIdWJSZXBvc2l0b3J5IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgR2l0SHViUmVwbyB9IGZyb20gJy4vZ2l0aHViLXJlcG8nO1xuaW1wb3J0IHsgTnBtQ29sbGVjdG9yLCBOcG1QYWNrYWdlRGF0YSwgTnBtRG93bmxvYWREYXRhIH0gZnJvbSAnLi9ucG0nO1xuaW1wb3J0IHtcbiAgZXh0cmFjdFJlcG9JbmZvLFxuICBwcm9jZXNzQ29udHJpYnV0b3JzRGF0YSxcbiAgYW5hbHl6ZURvY3VtZW50YXRpb25Db21wbGV0ZW5lc3MsXG4gIGFuYWx5emVUZXN0c1ByZXNlbmNlLFxuICBhbmFseXplUmVsZWFzZU5vdGVzQ29udGVudCxcbiAgY291bnRGZWF0c0FuZEZpeGVzLFxuICBjYWxjdWxhdGVUaW1lVG9GaXJzdFJlc3BvbnNlLFxuICBjYWxjdWxhdGVSZWxlYXNlRnJlcXVlbmN5LFxuICBjYWxjdWxhdGVPcGVuSXNzdWVzUmF0aW8sXG4gIGFuYWx5emVKc2lpTGFuZ3VhZ2VTdXBwb3J0LFxufSBmcm9tICcuLi91dGlscyc7XG5cbi8qKlxuICogUmF3IGRhdGEgZmV0Y2hlZCBmcm9tIGV4dGVybmFsIEFQSXMgYmVmb3JlIHByb2Nlc3NpbmdcbiAqL1xuaW50ZXJmYWNlIFJhd1BhY2thZ2VEYXRhIHtcbiAgcmVhZG9ubHkgbnBtOiBOcG1QYWNrYWdlRGF0YTtcbiAgcmVhZG9ubHkgZG93bmxvYWRzOiBOcG1Eb3dubG9hZERhdGE7XG4gIHJlYWRvbmx5IGF1dGhvclBhY2thZ2VDb3VudD86IG51bWJlcjtcbiAgcmVhZG9ubHkgZ2l0aHViPzogR2l0SHViUmVwb3NpdG9yeTtcbn1cblxuLyoqXG4gKiBQaGFzZSAxOiBGZXRjaCBhbGwgcmF3IGRhdGEgZnJvbSBleHRlcm5hbCBBUElzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoQWxsRGF0YShwYWNrYWdlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxSYXdQYWNrYWdlRGF0YT4ge1xuICBjb25zdCBucG1Db2xsZWN0b3IgPSBuZXcgTnBtQ29sbGVjdG9yKCk7XG5cbiAgYXdhaXQgbnBtQ29sbGVjdG9yLmZldGNoUGFja2FnZShwYWNrYWdlTmFtZSk7XG4gIGNvbnN0IG5wbURhdGEgPSBucG1Db2xsZWN0b3IuZ2V0UGFja2FnZURhdGEoKTtcbiAgY29uc3QgZG93bmxvYWREYXRhID0gYXdhaXQgbnBtQ29sbGVjdG9yLmZldGNoRG93bmxvYWREYXRhKCk7XG4gIGNvbnN0IGF1dGhvclBhY2thZ2VDb3VudERhdGEgPSBhd2FpdCBucG1Db2xsZWN0b3IuZmV0Y2hBdXRob3JQYWNrYWdlQ291bnQoKTtcblxuICBjb25zdCByZXBvSW5mbyA9IGV4dHJhY3RSZXBvSW5mbyhucG1EYXRhLnJlcG9zaXRvcnkudXJsKTtcbiAgY29uc3QgZ2l0aHViUmVwbyA9IG5ldyBHaXRIdWJSZXBvKHJlcG9JbmZvLm93bmVyLCByZXBvSW5mby5yZXBvKTtcblxuICBsZXQgZ2l0aHViRGF0YTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdpdGh1YlJlcG8ubWV0YWRhdGEoKTtcbiAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgR2l0SHViIGZldGNoIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGdpdGh1YkRhdGEgPSByZXNwb25zZS5kYXRhLnJlcG9zaXRvcnk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihgR2l0SHViIGZldGNoIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgfVxuXG5cbiAgcmV0dXJuIHtcbiAgICBucG06IG5wbURhdGEsXG4gICAgZG93bmxvYWRzOiBkb3dubG9hZERhdGEsXG4gICAgYXV0aG9yUGFja2FnZUNvdW50OiBhdXRob3JQYWNrYWdlQ291bnREYXRhLFxuICAgIC4uLihnaXRodWJEYXRhICYmIHsgZ2l0aHViOiBnaXRodWJEYXRhIH0pLFxuICB9O1xufVxuXG4vKipcbiAqIFBoYXNlIDI6IFByb2Nlc3MgcmF3IGRhdGEgaW50byBmaW5hbCBzdHJ1Y3R1cmVkIGZvcm1hdCBvcmdhbml6ZWQgYnkgc2lnbmFsIG5hbWVzXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NQYWNrYWdlRGF0YShyYXdEYXRhOiBSYXdQYWNrYWdlRGF0YSk6IFBhY2thZ2VEYXRhIHtcbiAgY29uc3QgW21ham9yVmVyc2lvbiwgbWlub3JWZXJzaW9uXSA9IHJhd0RhdGEubnBtLnZlcnNpb24uc3BsaXQoJy4nKTtcblxuICBjb25zdCBqc2lpTGFuZ3VhZ2VDb3VudCA9IGFuYWx5emVKc2lpTGFuZ3VhZ2VTdXBwb3J0KHJhd0RhdGEubnBtLnBhY2thZ2VKc29uKTtcblxuICBpZiAoIXJhd0RhdGEuZ2l0aHViKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZlcnNpb246IHJhd0RhdGEubnBtLnZlcnNpb24sXG4gICAgICB3ZWVrbHlEb3dubG9hZHM6IHJhd0RhdGEuZG93bmxvYWRzLmRvd25sb2FkcyxcbiAgICAgIGF1dGhvclBhY2thZ2VDb3VudDogcmF3RGF0YS5hdXRob3JQYWNrYWdlQ291bnQsXG4gICAgICBzdGFibGVWZXJzaW9uaW5nOiB7XG4gICAgICAgIGlzU3RhYmxlTWFqb3JWZXJzaW9uOiBwYXJzZUludChtYWpvclZlcnNpb24sIDEwKSA+PSAxLFxuICAgICAgICBoYXNNaW5vclJlbGVhc2VzOiBwYXJzZUludChtaW5vclZlcnNpb24sIDEwKSA+PSAxLFxuICAgICAgICBpc0RlcHJlY2F0ZWQ6IHJhd0RhdGEubnBtLmlzRGVwcmVjYXRlZCxcbiAgICAgIH0sXG4gICAgICBwcm92ZW5hbmNlVmVyaWZpY2F0aW9uOiByYXdEYXRhLm5wbS5oYXNQcm92ZW5hbmNlLFxuICAgICAgbXVsdGlMYW5ndWFnZVN1cHBvcnQ6IGpzaWlMYW5ndWFnZUNvdW50LFxuICAgIH07XG4gIH1cblxuICBjb25zdCByZXBvc2l0b3J5ID0gcmF3RGF0YS5naXRodWI7XG5cbiAgcmV0dXJuIHtcbiAgICB2ZXJzaW9uOiByYXdEYXRhLm5wbS52ZXJzaW9uLFxuICAgIG51bWJlck9mQ29udHJpYnV0b3JzX01haW50ZW5hbmNlOiBwcm9jZXNzQ29udHJpYnV0b3JzRGF0YShyZXBvc2l0b3J5LmNvbW1pdHMpLFxuICAgIGRvY3VtZW50YXRpb25Db21wbGV0ZW5lc3M6IGFuYWx5emVEb2N1bWVudGF0aW9uQ29tcGxldGVuZXNzKHJlcG9zaXRvcnkpLFxuICAgIHRlc3RzQ2hlY2tsaXN0OiBhbmFseXplVGVzdHNQcmVzZW5jZShyZXBvc2l0b3J5KSxcbiAgICBhdXRob3JQYWNrYWdlQ291bnQ6IHJhd0RhdGEuYXV0aG9yUGFja2FnZUNvdW50LFxuICAgIHJlbGVhc2VOb3Rlc0luY2x1ZGVGZWF0c0FuZEZpeGVzOiBhbmFseXplUmVsZWFzZU5vdGVzQ29udGVudChyZXBvc2l0b3J5KSxcbiAgICB3ZWVrbHlEb3dubG9hZHM6IHJhd0RhdGEuZG93bmxvYWRzLmRvd25sb2FkcyxcbiAgICBnaXRodWJTdGFyczogcmVwb3NpdG9yeS5zdGFyZ2F6ZXJDb3VudCA/PyAwLFxuICAgIHN0YWJsZVZlcnNpb25pbmc6IHtcbiAgICAgIGlzU3RhYmxlTWFqb3JWZXJzaW9uOiBwYXJzZUludChtYWpvclZlcnNpb24sIDEwKSA+PSAxLFxuICAgICAgaGFzTWlub3JSZWxlYXNlczogcGFyc2VJbnQobWlub3JWZXJzaW9uLCAxMCkgPj0gMSxcbiAgICAgIGlzRGVwcmVjYXRlZDogcmF3RGF0YS5ucG0uaXNEZXByZWNhdGVkLFxuICAgIH0sXG4gICAgdGltZVRvRmlyc3RSZXNwb25zZTogY2FsY3VsYXRlVGltZVRvRmlyc3RSZXNwb25zZShyZXBvc2l0b3J5Lmlzc3VlcyksXG4gICAgcHJvdmVuYW5jZVZlcmlmaWNhdGlvbjogcmF3RGF0YS5ucG0uaGFzUHJvdmVuYW5jZSxcbiAgICBudW1iZXJPZkNvbnRyaWJ1dG9yc19Qb3B1bGFyaXR5OiBwcm9jZXNzQ29udHJpYnV0b3JzRGF0YShyZXBvc2l0b3J5LmNvbW1pdHMpLFxuICAgIHJlbGVhc2VGcmVxdWVuY3k6IGNhbGN1bGF0ZVJlbGVhc2VGcmVxdWVuY3kocmVwb3NpdG9yeS5yZWxlYXNlcyksXG4gICAgbnVtYmVyT2ZGZWF0c0FuZEZpeGVzOiBjb3VudEZlYXRzQW5kRml4ZXMocmVwb3NpdG9yeSksXG4gICAgbXVsdGlMYW5ndWFnZVN1cHBvcnQ6IGpzaWlMYW5ndWFnZUNvdW50LFxuICAgIG9wZW5Jc3N1ZXNSYXRpbzogY2FsY3VsYXRlT3Blbklzc3Vlc1JhdGlvKHJlcG9zaXRvcnkub3Blbklzc3Vlc0NvdW50LCByZXBvc2l0b3J5LnRvdGFsSXNzdWVzQ291bnQpLFxuICB9O1xufVxuXG4vKipcbiAqIE1haW4gZW50cnkgcG9pbnQ6IEZldGNoIGFuZCBwcm9jZXNzIHBhY2thZ2UgZGF0YVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29sbGVjdFBhY2thZ2VEYXRhKHBhY2thZ2VOYW1lOiBzdHJpbmcpOiBQcm9taXNlPFBhY2thZ2VEYXRhPiB7XG4gIGNvbnN0IHJhd0RhdGEgPSBhd2FpdCBmZXRjaEFsbERhdGEocGFja2FnZU5hbWUpO1xuICByZXR1cm4gcHJvY2Vzc1BhY2thZ2VEYXRhKHJhd0RhdGEpO1xufSJdfQ==